<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sector Detail - Responsible AI Explorer</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body class="bg-light">
  <div class="container my-5">
    <a href="/welcome.html" class="btn btn-secondary mb-3" aria-label="Back to sectors">‚Üê Back</a>
    <div id="sector-banner" class="bg-image rounded" style="height: 200px;"></div>
    <h1 id="sector-title" class="text-3xl font-bold mt-4"></h1>
    <p id="sector-desc" class="collapse"></p>
    <button class="btn btn-link" data-bs-toggle="collapse" data-bs-target="#sector-desc" aria-expanded="false">Show More</button>
    <h2 class="text-2xl font-semibold mt-6">Applications</h2>
    <div class="row row-cols-1 row-cols-md-2 g-4" id="app-grid"></div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    async function loadSector() {
      const params = new URLSearchParams(window.location.search);
      const sectorId = params.get('id');
      try {
        const res = await fetch(`/api/sectors/${sectorId}`);
        const data = await res.json();
        document.getElementById('sector-banner').style.backgroundImage = `url(/banners/${sectorId}.jpg)`;
        document.getElementById('sector-title').textContent = data.name;
        document.getElementById('sector-desc').textContent = data.description;
        const grid = document.getElementById('app-grid');
        data.applications.forEach(app => {
          grid.innerHTML += `
            <div class="col">
              <div class="card" data-bs-toggle="tooltip" title="${app.description}">
                <div class="card-body">
                  <h4 class="card-title">${app.name}</h4>
                  <a href="/application.html?id=${app.id}&sector=${sectorId}" class="btn btn-outline-primary">View Details</a>
                </div>
              </div>
            </div>
          `;
        });
        new bootstrap.Tooltip(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      } catch (err) {
        console.error('Failed to load sector:', err);
      }
    }
    loadSector();
  </script>
</body>
</html>